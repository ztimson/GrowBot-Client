<div class="container-fluid">
  <div class="row pt-3">
    <div class="col-12 col-lg-8">
      <mat-card style="padding: 3px">
        <mat-card-content>
          <stream></stream>
        </mat-card-content>
      </mat-card>
    </div>
    <div class="col-12 col-lg-4 mt-3 mt-lg-0">
      <mat-card>
        <mat-card-content>
          <div>
            <h2>Timelapse</h2>
            <mat-divider></mat-divider>
            <div>
              <mat-slide-toggle class="mt-3" [(ngModel)]="cameraService.config.timelapseEnabled" color="accent" (change)="save()">Enable</mat-slide-toggle>
              <mat-form-field class="w-100 mt-3" appearance="fill">
                <mat-label>Photo Frequency</mat-label>
                <mat-select [(ngModel)]="cameraService.config.timelapseFrequency" [disabled]="!cameraService.config.timelapseEnabled" (selectionChange)="save()">
                  <mat-option value="0 * * * * *">Minute</mat-option>
                  <mat-option value="0 0 * * * *">Hourly</mat-option>
                  <mat-option value="0 0 12 * * *">Daily</mat-option>
                  <mat-option value="0 0 12 */2 * *">Alternating Days</mat-option>
                  <mat-option value="0 0 12 * * 0">Weekly</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
          <div class="mt-3">
            <h2>Images</h2>
            <mat-divider></mat-divider>
            <div>
              <div *ngIf="cameraService.images.length == 0" class="pt-4 text-primary">No Images</div>
              <mat-list>
                <mat-list-item *ngFor="let image of cameraService.images" class="hover">
                  <div class="w-100 d-flex align-items-center hover">
                    <div class="pr-2 pt-1">
                      <mat-icon>image</mat-icon>
                    </div>
                    <div class="flex-grow-1">
                      <a target="_blank" [href]="environment.api + '/images/' + image">{{image}}</a>
                    </div>
                    <div>
                      <button mat-icon-button class="text-danger" (click)="cameraService.del(image)"><mat-icon>delete</mat-icon></button>
                    </div>
                  </div>
                </mat-list-item>
              </mat-list>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>

